#!/usr/bin/env ruby

require "blade_runner"
require "yaml"
require "optparse"

options = {}

filename = ".blade.yml"
if File.exists?(filename)
  options = YAML.load_file(filename)
end

OptionParser.new do |opts|
  opts.banner = "Blade Runner"

  opts.on("-f", "--filter pattern", Regexp, "Filter browser names") do |pattern|
    options[:filter] = pattern
  end

  opts.on("-CI", "Run in CI mode") do
    options[:mode] = :ci
  end
end.parse!

BladeRunner.start(options)
